**CPT REQUIREMENTS:**




Adding Location and Review to History:




self.location_history.append({"user_id": user_id, "location": location, "review": review})




Explanation: This code adds a userâ€™s location and their review to the location_history 

list. It helps track the locations users have pinned along with their associated

 reviews, creating a historical log for future reference.





Student-Developed Procedure:





def save_location(self, user_id, latitude, longitude, review):
    """Save a specific location with its review."""
    location = {"user_id": user_id, "latitude": latitude, "longitude": longitude, "review": review}
    self.location_history.append(location)
    return location





Explanation: The save_location method stores a user's latitude, longitude, and review for a 


particular location. This allows users to return to the same spot later by saving and 


referencing their data in the system.





Algorithm (Sequencing, Selection, Iteration):






try:
    location_data = request.get_json()

    if not location_data or 'latitude' not in location_data or 'longitude' not in location_data:
        return jsonify({"error": "Latitude and Longitude are required"}), 400




Explanation: This code illustrates selection through the if statement. It checks whether the 

required fields (latitude and longitude) are present in the incoming request data. If missing, 

it returns an error message indicating that both coordinates are necessary.




Procedure Call:





location_response = self.save_location(user_id, latitude, longitude, review)



Explanation: This line calls the save_location method to store the user's location 

and their review. It sends the received data to be saved and stores it in the system, 

preparing a response for the user.




Output Statement:




return jsonify({"message": "Location saved successfully", "location": location_response})



Explanation: This statement sends a JSON response back to the user, confirming that their 

location and review have been saved successfully. It includes the saved location data to 

verify that the operation was successful.




CRUD Functionality in Model


The Create operation is a key part of CRUD (Create, Read, Update, Delete) functionality. Here's how 

you could define a method to save a new location to the database:





def create(self):
    """Save the location to the database."""
    db.session.add(self)
    db.session.commit()




Explanation: This create method adds the location object to the database session and commits it,

 effectively saving the new location record to the database. This supports the "Create" 
 
 aspect of CRUD functionality.
